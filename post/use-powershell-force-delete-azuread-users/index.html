<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸŒˆUse Powershell Force Delete AzureAD Users | Fire and Blood ğŸ”¥</title>
<link rel="shortcut icon" href="https://tediorelee.github.io/favicon.ico?v=1555662654473">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://tediorelee.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>
<script src="https://www.xtxtmtxtx.xyz/js/anime.min.js"></script>
<script src="https://www.xtxtmtxtx.xyz/js/fireworks.js"></script>
<script src="https://www.xtxtmtxtx.xyz/js/canvas-nest.min.js"></script>


  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://tediorelee.github.io">
  <img class="avatar" src="https://tediorelee.github.io/images/avatar.png?v=1555662654473" alt="">
  </a>
  <h1 class="site-title">
    Fire and Blood ğŸ”¥
  </h1>
  <p class="site-description">
    â€œä»–å°±æ˜¯é¢„è¨€ä¸­çš„ç‹å­,ä»–çš„æ­Œå°±æ˜¯å†°ä¸ç«ä¹‹æ­Œâ€
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
      
        <a href="https://download.tediorelee.cn" class="menu" target="_blank">
          ä¸‹è½½
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
        <a href="https://twitter.com/ted1ore_lee" target="_blank">
          <i class="fab fa-twitter"></i>
        </a>
      
    
      
        <a href="http://weibo.com/u/3200965454/" target="_blank">
          <i class="fab fa-weibo"></i>
        </a>
      
    
      
    
      
    
  </div>
</div>

      
        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ğŸŒˆUse Powershell Force Delete AzureAD Users
            </h2>
            <div class="post-info">
              <time class="post-time">
                Â· 2019-04-15 Â·
              </time>
              
                <a href="https://tediorelee.github.io/tag/x6J1TFbCJ" class="post-tags">
                  # Azure
                </a>
              
            </div>
            
              <div class="post-feature-image" style="background-image: url('https://i.loli.net/2019/04/15/5cb43e913776b.png')">
              </div>
            
            <div class="post-content">
              <h2 id="å‰è¨€">å‰è¨€</h2>
<blockquote>
<p>æœ€è¿‘ä¸€ç›´é¼“æ£ADFSæœåŠ¡å™¨ï¼Œå„ç§è™šæ‹Ÿæœºè£…äº†åˆåˆ 
å›½é™…ç‰ˆå›½å†…ç‰ˆè®¢é˜…ä¹Ÿæ˜¯æ¢ç€èŠ±æ ·çš„å„ç§Dirsync
å¯¼è‡´æˆ‘çš„å›½é™…ç‰ˆè®¢é˜…ä¸ŠåŒæ­¥äº†ä¸€å †ä¹±ä¸ƒå…«ç³Ÿçš„ç”¨æˆ·
è¿™æ¬¡è¦æœ‰å…¶ä»–ç”¨å¤„äº†å‘ç°åˆ é™¤ç›®å½•æ—¶æç¤ºè‡ªå®šä¹‰åŸŸååœ¨ä½¿ç”¨ä¸­
æ‰¾äº†ä¸‹æ–‡æ¡£ï¼Œç”¨powershellåˆ é™¤ç”¨æˆ·å‘ç°ç‰¹åˆ«ç®€å•</p>
</blockquote>
<!--more-->
<h2 id="å®‰è£…msonlineæ¨¡å—">å®‰è£…MSOnlineæ¨¡å—</h2>
<p>æ‰“å¼€powershellï¼Œè¾“å…¥<code>Install-Module MSOnline</code>
å¼¹å‡ºæ¥çš„æç¤ºæ¡†ä¸­è¾“å…¥ä¸¤æ¬¡<code>Y</code>
ç­‰å¾…ä¸¤åˆ†é’Ÿå®‰è£…å®Œæˆå³å¯
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-15-11.png" alt=""></p>
<h2 id="è¿æ¥åˆ°azureäº‘">è¿æ¥åˆ°Azureäº‘</h2>
<p>powershellä¸­è¾“å…¥<code>Connect-MsolService</code>
æ³¨æ„ï¼šè¿™é‡Œå› ä¸ºæ˜¯å›½é™…ç‰ˆç¯å¢ƒï¼Œæ‰€ä»¥åé¢ä¸ç”¨æ¥å‚æ•°ï¼Œå‡å¦‚æ˜¯å›½å†…ç‰ˆæˆ–è€…å…¶ä»–ç‰ˆæœ¬éœ€è¦åé¢æ¥ä¸Šå‚æ•°ï¼Œå¦‚ä¸‹å›¾
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-02-51.png" alt=""></p>
<p>åœ¨å¼¹å‡ºæ¥çš„å¯¹è¯æ¡†ä¸­è¾“å…¥ä½ çš„ç®¡ç†å‘˜è´¦å·å’Œå¯†ç å³å¯
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-06-29.png" alt=""></p>
<h2 id="åœæ­¢dirsyncåŒæ­¥">åœæ­¢DirSyncåŒæ­¥</h2>
<p>powershellä¸­è¾“å…¥<code>Set-MsolDirSyncEnabled -EnableDirSync $false</code>
å¼¹å‡ºæ¥çš„æç¤ºæ¡†ä¸­è¾“å…¥<code>Y</code>
ç™»å½•portalå¯çœ‹åˆ°AAD connectä¸­åŒæ­¥å·²ç»æ˜¾ç¤ºåœæ­¢
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-34-14.png" alt=""></p>
<h2 id="åˆ é™¤aadç”¨æˆ·">åˆ é™¤AADç”¨æˆ·</h2>
<p>powershellä¸­è¾“å…¥<code>Get-MsolUser | Export-CSV C:\users.csv</code>
å°†AADç”¨æˆ·å¯¼å‡ºåˆ°æœ¬åœ°ä¸ºcsvæ–‡æ¡£
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-21-47.png" alt=""></p>
<p><code>Import-CSV C:\users.csv | Remove-MsOlUser â€“Force</code>
ä½¿ç”¨forceå‚æ•°å¼ºåˆ¶åˆ é™¤ç”¨æˆ·å³å¯</p>
<p>ç™»å½•portalå¯çœ‹åˆ°é™¤äº†ç®¡ç†å‘˜ç”¨æˆ·ä¹‹å¤–çš„æ‰€æœ‰AADç”¨æˆ·å‡è¢«åˆ é™¤
<img src="https://blog2019.pek3b.qingstor.com/powershelldelaaduser/Snipaste_2019-01-25_17-22-30.png" alt=""></p>
<h2 id="å‚è€ƒæ–‡æ¡£">å‚è€ƒæ–‡æ¡£</h2>
<blockquote>
<p><strong>https://docs.microsoft.com/en-us/office365/enterprise/turn-off-directory-synchronization</strong>
<strong>https://docs.microsoft.com/zh-cn/office365/enterprise/powershell/connect-to-office-365-powershell</strong>
<strong>https://blogs.technet.microsoft.com/jeffgilb/2017/03/09/deleting-azure-active-directory/</strong></p>
</blockquote>

            </div>
          </article>
        </div>
    
        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://tediorelee.github.io/post/build-a-personal-download-center">
              <h3 class="post-title">
                ğŸŒˆBuild a personal Download Center
              </h3>
            </a>
          </div>  
        

        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '0102793645acc8ba1446',
    clientSecret: 'dbc9e05fb6ac3866c98a32d4af38e4494934965c',
    repo: 'tediorelee.github.io',
    owner: 'tediorelee',
    admin: ['tediorelee'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        
    
        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> Published by <a href="https://tediorelee.cn">tediorelee</a> <a href="http://www.miitbeian.gov.cn">èœ€ICPå¤‡18031601å·</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
