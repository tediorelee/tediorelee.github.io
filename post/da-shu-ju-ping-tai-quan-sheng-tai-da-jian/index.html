<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸŒˆå¤§æ•°æ®å¹³å°å…¨ç”Ÿæ€æ­å»º | tediorelee&#39;s æ¼«æ¸¸ä¹‹æ­Œï½</title>
<link rel="shortcut icon" href="https://tediorelee.github.io/favicon.ico?v=1555496057320">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://tediorelee.github.io/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://tediorelee.github.io">
  <img class="avatar" src="https://tediorelee.github.io/images/avatar.png?v=1555496057320" alt="">
  </a>
  <h1 class="site-title">
    tediorelee&#39;s æ¼«æ¸¸ä¹‹æ­Œï½
  </h1>
  <p class="site-description">
    æœªæ¥æ²¡æœ‰äººèƒ½å¤Ÿé¢„æµ‹
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
      
        <a href="https://download.tediorelee.cn" class="menu" target="_blank">
          ä¸‹è½½
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
        <a href="https://twitter.com/ted1ore_lee" target="_blank">
          <i class="fab fa-twitter"></i>
        </a>
      
    
      
        <a href="http://weibo.com/u/3200965454/" target="_blank">
          <i class="fab fa-weibo"></i>
        </a>
      
    
      
    
      
    
  </div>
</div>

      
        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ğŸŒˆå¤§æ•°æ®å¹³å°å…¨ç”Ÿæ€æ­å»º
            </h2>
            <div class="post-info">
              <time class="post-time">
                Â· 2019-04-15 Â·
              </time>
              
                <a href="https://tediorelee.github.io/tag/sYpHDKKCm" class="post-tags">
                  # Bigdata
                </a>
              
            </div>
            
              <div class="post-feature-image" style="background-image: url('https://i.loli.net/2019/04/15/5cb4374756b9a.png')">
              </div>
            
            <div class="post-content">
              <h2 id="ä¸»è¦å†…å®¹">ä¸»è¦å†…å®¹</h2>
<ol>
<li>å®ŒæˆHadoop/Hbase/Spark/kafka/flume/Mysqlç­‰å·¥å…·çš„æ­å»ºå·¥ä½œ</li>
<li>å¹¶åˆ©ç”¨æµ‹è¯•æ•°æ®ï¼Œæµ‹è¯•ç›¸å…³å†…å®¹</li>
</ol>
<!--more-->
<h2 id="å®‰è£…è™šæ‹Ÿæœº">å®‰è£…è™šæ‹Ÿæœº</h2>
<p>VMWAREå®‰è£…ubuntu-server16.04ï¼Œæ­¥éª¤ç•¥è¿‡</p>
<h3 id="ä¿®æ”¹ubuntuçš„rootç”¨æˆ·å">ä¿®æ”¹Ubuntuçš„rootç”¨æˆ·å</h3>
<p>è¾“å…¥<code>sudo passwd root</code>ï¼Œé”®å…¥ä½ çš„æœ¬åœ°ç”¨æˆ·å¯†ç ï¼Œéšåæ›´æ–°ä½ çš„rootç”¨æˆ·å¯†ç </p>
<p><img src="https://i.loli.net/2019/04/09/5cac09d65105c.png" alt=""></p>
<p>ä½¿ç”¨<code>su root</code>å³å¯åˆ‡æ¢åˆ°rootç”¨æˆ·ä¸‹</p>
<h3 id="é…ç½®é™æ€ip">é…ç½®é™æ€IP</h3>
<p>ä½¿ç”¨rootèº«ä»½ç¼–è¾‘<code>/etc/network/interface</code>ä¸‹çš„<code>eth0</code>ç½‘å¡</p>
<p><img src="https://i.loli.net/2019/04/09/5cac09fa5c64a.png" alt=""></p>
<p>ä»¥æˆ‘æœ¬åœ°ç½‘å…³ä¸º<code>192.168.6.1</code>ä¸ºä¾‹ï¼Œå°†è™šæ‹ŸæœºIPå®šä¸º<code>192.168.6.22</code>ï¼ŒDNSå¡«ä¸Šæœ¬åœ°ç”µä¿¡çš„DNS</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0a317d82e.png" alt=""></p>
<p>ä¿å­˜é€€å‡ºï¼Œä½¿ç”¨å‘½ä»¤<code>ifdown eth0</code>å¸è½½ç½‘å¡ï¼Œå†ä½¿ç”¨å‘½ä»¤<code>ifup eth0</code>é‡æ–°å¯ç”¨ç½‘å¡å³å¯ä½¿ä¿®æ”¹ç”Ÿæ•ˆã€‚</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0a50a0bda.png" alt=""></p>
<p>è¿™æ—¶å€™å†ç”¨<code>ifconfig</code>æŸ¥çœ‹ç½‘å¡é…ç½®å³å¯çœ‹åˆ°ä¿®æ”¹æˆåŠŸã€‚</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0a6827f6d.png" alt=""></p>
<h3 id="é…ç½®sshç™»å½•">é…ç½®SSHç™»å½•</h3>
<p>rootç”¨æˆ·ä¸‹ï¼Œä½¿ç”¨å‘½ä»¤<code>apt-get install ssh</code></p>
<p>ç­‰å¾…å®‰è£…å®Œæˆå³å¯</p>
<p>vimç¼–è¾‘<code>etc/ssh/sshd_config</code></p>
<p>æ‰¾åˆ°<code>PermitRootLogin</code>å­—æ®µ,ä¿®æ”¹ä¸º<code>yes</code></p>
<p>ä¿å­˜é€€å‡º</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0a84c7cb6.png" alt=""></p>
<p><code>service ssh restart</code>é‡å¯sshæœåŠ¡</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0adf0c397.png" alt=""></p>
<p>ä½¿ç”¨sshå·¥å…·å³å¯è¿æ¥</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0af8412f6.png" alt=""></p>
<h3 id="ä¿®æ”¹è½¯ä»¶æº">ä¿®æ”¹è½¯ä»¶æº</h3>
<p>æ‰¾åˆ°<a href="https://opsx.alibaba.com/mirror">é˜¿é‡Œå·´å·´å¼€æºé•œåƒç«™</a>é‡Œé¢çš„Ubuntuï¼Œç‚¹å‡»åé¢çš„å¸®åŠ©</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0b1822858.png" alt=""></p>
<p>é€‰æ‹©ä½ å¯¹åº”çš„Ubuntuç‰ˆæœ¬ï¼Œå¤åˆ¶è½¯ä»¶æºä¿¡æ¯ï¼Œç²˜è´´åˆ°<code>/etc/apt/sources.list</code>é‡Œ</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0b334dfb8.png" alt=""></p>
<p>ä¿å­˜é€€å‡ºå³å¯ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥<code>apt-get update</code>ä¸€ä¸‹ï¼Œé‡æ–°æ›´æ–°ä¸€ä¸‹è½¯ä»¶æº</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0b4e08e03.png" alt=""></p>
<h2 id="å®‰è£…jdk">å®‰è£…JDK</h2>
<p>æ–°å»º<code>mkdir /usr/local/jdk</code>æ–‡ä»¶å¤¹</p>
<p>ä½¿ç”¨Winscpå·¥å…·ä¸Šä¼ jdkåŒ…åˆ°<code>/usr/local</code>æ–‡ä»¶å¤¹é‡Œ</p>
<p><code>tar -zxvf jdkxxx.tar.gz</code>è§£å‹ç¼©</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0b81b3c31.png" alt=""></p>
<p>æ·»åŠ jdkçš„ç¯å¢ƒå˜é‡</p>
<p>æ‰“å¼€æ–‡ä»¶<code>vim /etc/profile</code>åœ¨æœ«å°¾åŠ ä¸Š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0b9bda116.png" alt=""></p>
<pre><code>export JAVA_HOME=/usr/local/jdk/jdk1.8.0_201
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.ja$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin
</code></pre>
<p>ä¿å­˜å¹¶é€€å‡ºï¼Œ<code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ
è¿™æ—¶è¾“å…¥<code>java -version</code>å³å¯æŸ¥çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯è¡¨ç¤ºjdkå®‰è£…æˆåŠŸ</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0bb5f34c7.png" alt=""></p>
<h2 id="é…ç½®sshå…å¯†ç™»å½•">é…ç½®SSHå…å¯†ç™»å½•</h2>
<p>è¿™é‡Œçš„ä¸»æœºåæˆ‘å®šä¹‰ä¸º<strong>master</strong></p>
<p>ä¿®æ”¹<code>/etc/hosts</code>ï¼ŒæŠŠ<strong>master</strong>çš„ipåœ°å€ä¿®æ”¹ä¸º<code>127.0.0.1</code>ï¼Œä¿å­˜é€€å‡º</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0bfa8d0b9.png" alt=""></p>
<p>è¿›å…¥<code>.ssh</code>æ–‡ä»¶å¤¹ï¼Œåˆ é™¤åŸæœ‰å¤šä½™çš„å…¬é’¥å’Œç§é’¥</p>
<p><code>ssh-keygen</code>ç”Ÿæˆæ–°çš„sshå¯†é’¥ï¼Œä¸€è·¯å›è½¦ç¡®å®š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac0c19d61be.png" alt=""></p>
<p>å°†å…¬é’¥å¤åˆ¶åˆ°<strong>authorized_keys</strong>é‡Œé¢</p>
<pre><code>cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0c30f1d03.png" alt=""></p>
<p>æµ‹è¯•ç™»å½•ï¼Œ<code>ssh master</code></p>
<p><img src="https://i.loli.net/2019/04/09/5cac0c4669e8c.png" alt=""></p>
<p>æˆåŠŸå®ç°sshå…å¯†ç™»å½•</p>
<h2 id="å®‰è£…hadoop">å®‰è£…Hadoop</h2>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<blockquote>
<p>Hadoopæ˜¯ä¸€ä¸ªç”±ApacheåŸºé‡‘ä¼šæ‰€å¼€å‘çš„åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€æ¶æ„ã€‚Hadoopçš„æ¡†æ¶æœ€æ ¸å¿ƒçš„è®¾è®¡å°±æ˜¯ï¼šHDFSå’ŒMapReduceã€‚HDFSä¸ºæµ·é‡çš„æ•°æ®æä¾›äº†å­˜å‚¨ï¼Œè€ŒMapReduceåˆ™ä¸ºæµ·é‡çš„æ•°æ®æä¾›äº†è®¡ç®—ã€‚</p>
<p>HDFSï¼ŒHadoop Distributed File Systemï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œç”¨æ¥å­˜å‚¨ Hadoop é›†ç¾¤ä¸­æ‰€æœ‰å­˜å‚¨èŠ‚ç‚¹ä¸Šçš„æ–‡ä»¶ï¼ŒåŒ…å«ä¸€ä¸ª NameNode å’Œå¤§é‡ DataNodeã€‚NameNodeï¼Œå®ƒåœ¨ HDFS å†…éƒ¨æä¾›å…ƒæ•°æ®æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿåç§°ç©ºé—´å’Œæ§åˆ¶å¤–éƒ¨å®¢æˆ·æœºçš„è®¿é—®ï¼Œå†³å®šæ˜¯å¦å°†æ–‡ä»¶æ˜ å°„åˆ° DataNode ä¸Šã€‚DataNodeï¼Œå®ƒä¸º HDFS æä¾›å­˜å‚¨å—ï¼Œå“åº”æ¥è‡ª HDFS å®¢æˆ·æœºçš„è¯»å†™è¯·æ±‚ã€‚</p>
<p>MapReduceæ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œç”¨äºå¤§è§„æ¨¡æ•°æ®é›†çš„å¹¶è¡Œè¿ç®—ã€‚æ¦‚å¿µ&quot;Mapï¼ˆæ˜ å°„ï¼‰â€œå’Œ&quot;Reduceï¼ˆå½’çº¦ï¼‰â€ï¼Œæ˜¯å®ƒä»¬çš„ä¸»è¦æ€æƒ³ï¼Œå³æŒ‡å®šä¸€ä¸ªMapï¼ˆæ˜ å°„ï¼‰å‡½æ•°ï¼Œç”¨æ¥æŠŠä¸€ç»„é”®å€¼å¯¹æ˜ å°„æˆä¸€ç»„æ–°çš„é”®å€¼å¯¹ï¼ŒæŒ‡å®šå¹¶å‘çš„Reduceï¼ˆå½’çº¦ï¼‰å‡½æ•°ï¼Œç”¨æ¥ä¿è¯æ‰€æœ‰æ˜ å°„çš„é”®å€¼å¯¹ä¸­çš„æ¯ä¸€ä¸ªå…±äº«ç›¸åŒçš„é”®ç»„ã€‚</p>
</blockquote>
<p>åœ¨<code>/usr/local</code>ä¸­æ–°å»º<code>hadoop</code>æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨winscpä¸Šä¼ hadoopå®‰è£…åŒ…</p>
<p>è§£å‹ç¼©hadoop<code>tar -zxvf hadoop-2.6.4.tar.gz</code></p>
<p><img src="https://i.loli.net/2019/04/09/5cac0c7feff1e.png" alt=""></p>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡">é…ç½®ç¯å¢ƒå˜é‡</h3>
<p><code>vim /etc/profile</code>ï¼Œåé¢åŠ ä¸Š</p>
<pre><code>export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export
CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0c9793d5c.png" alt=""></p>
<p><code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<p>ç¼–è¾‘<code>hadoop-env.shã€mapred-env.shã€yarn-env.sh</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>JAVA_HOME</code>å‚æ•°ä¸º</p>
<pre><code>export JAVA_HOME=&quot;/usr/local/jdk&quot;
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0cae3f607.png" alt=""></p>
<h3 id="é…ç½®core-sitexml">é…ç½®core-site.xml</h3>
<p><code>vim {HADOOP_HOME}/etc/hadoop/core-site.xml</code></p>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<pre><code>&lt;configuration&gt;
	&lt;property&gt;
&lt;name&gt;fs.defaultFS&lt;/name&gt;
&lt;value&gt;hdfs://localhost:9000&lt;/value&gt;
	&lt;/property&gt;
	&lt;property&gt;
   &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
    &lt;value&gt;/usr/local/data&lt;/value&gt;
	&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0cc6079e4.png" alt=""></p>
<p><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œçš„<code>hadoop.tmp.dir</code>ä¿®æ”¹ä¸ºè‡ªå·±åˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶å­˜æ”¾ç›®å½•</p>
<h3 id="é…ç½®hdfs-sitexml">é…ç½®hdfs-site.xml</h3>
<p><code>vim ${HADOOP_HOME}/etc/hadoop/hdfs-site.xml</code></p>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<pre><code>&lt;configuration&gt;
&lt;property&gt;
  &lt;name&gt;dfs.name.dir&lt;/name&gt;
  &lt;value&gt;/usr/local/data/namenode&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;dfs.data.dir&lt;/name&gt;
  &lt;value&gt;/usr/local/data/datanode&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;dfs.replication&lt;/name&gt;
  &lt;value&gt;1&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0d1732149.png" alt=""></p>
<p><strong>æ³¨æ„</strong>ï¼šå› ä¸ºè¿™é‡Œæ˜¯ä¼ªåˆ†å¸ƒå¼ç¯å¢ƒåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸º1</p>
<h3 id="é…ç½®mapred-sitexml">é…ç½®mapred-site.xml</h3>
<p>ä¿®æ”¹æ–‡ä»¶å</p>
<p><code>cp mapred-site.xml.template mapred-site.xml</code></p>
<p><code>vim ${HADOOP_HOME}/etc/hadoop/mapred-site.xml</code></p>
<pre><code>&lt;configuration&gt;
&lt;property&gt;
  &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
  &lt;value&gt;yarn&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac0d8a7317a.png" alt=""></p>
<h3 id="é…ç½®yarn-sitexml">é…ç½®yarn-site.xml</h3>
<p><code>vim ${HADOOP_HOME}/etc/hadoop/yarn-site.xml</code></p>
<pre><code>&lt;configuration&gt;
&lt;!-- Site specific YARN configuration properties --&gt;
&lt;property&gt;
  &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
  &lt;value&gt;master&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;              
  &lt;value&gt;mapreduce_shuffle&lt;/value&gt;     
&lt;/property&gt;
&lt;/configuration&gt;
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac136863441.png" alt=""></p>
<h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<ul>
<li>æ ¼å¼åŒ–hdfs</li>
</ul>
<p><code>hdfs namenode â€“format</code></p>
<p><img src="https://i.loli.net/2019/04/09/5cac137f2dba0.png" alt=""></p>
<ul>
<li>å¯åŠ¨hdfs</li>
</ul>
<pre><code>root@bigdata-platform:/usr/local# cd /usr/local/hadoop/hadoop-2.7.7/
root@bigdata-platform:/usr/local/hadoop/hadoop-2.7.7# sbin/start-dfs.sh

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac158d47114.png" alt=""></p>
<ul>
<li>å¯åŠ¨yarn</li>
</ul>
<pre><code>root@bigdata-platform:/usr/local/hadoop/hadoop-2.7.7# sbin/start-yarn.sh

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac15b8ab4c8.png" alt=""></p>
<ul>
<li>jpsæŸ¥çœ‹</li>
</ul>
<p><img src="https://i.loli.net/2019/04/09/5cac15cbbd1d1.png" alt=""></p>
<p>å¯ä»¥çœ‹åˆ°æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯åŠ¨æˆåŠŸï¼Œæ‰“å¼€<code>http://192.168.6.22:50070</code>å¯ä»¥æŸ¥çœ‹å¯è§†åŒ–é¡µé¢ã€‚</p>
<p><img src="https://i.loli.net/2019/04/09/5cac15f1f0b6a.png" alt=""></p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼ŒHADOOPçš„å®‰è£…å°±å®Œæˆäº†ã€‚</p>
<h2 id="å®‰è£…hive">å®‰è£…Hive</h2>
<h3 id="ä»‹ç»-2">ä»‹ç»</h3>
<blockquote>
<p>Hiveæ˜¯åŸºäºHadoopçš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›ç®€å•çš„sqlæŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°†sqlè¯­å¥è½¬æ¢ä¸ºMapReduceä»»åŠ¡è¿›è¡Œè¿è¡Œã€‚ å…¶ä¼˜ç‚¹æ˜¯å­¦ä¹ æˆæœ¬ä½ï¼Œå¯ä»¥é€šè¿‡å’ŒSQLç±»ä¼¼çš„HiveQLè¯­è¨€å¿«é€Ÿå®ç°ç®€å•çš„MapReduceç»Ÿè®¡,ä¸å¿…å¼€å‘ä¸“é—¨çš„MapReduceåº”ç”¨ï¼Œååˆ†é€‚åˆæ•°æ®ä»“åº“çš„ç»Ÿè®¡åˆ†æã€‚åŒæ—¶ï¼Œè¿™ä¸ªè¯­è¨€ä¹Ÿå…è®¸ç†Ÿæ‚‰ MapReduce å¼€å‘è€…çš„å¼€å‘è‡ªå®šä¹‰çš„ mapper å’Œ reducer æ¥å¤„ç†å†…å»ºçš„ mapper å’Œ reducer æ— æ³•å®Œæˆçš„å¤æ‚çš„åˆ†æå·¥ä½œã€‚</p>
<p>Hive æ²¡æœ‰ä¸“é—¨çš„æ•°æ®æ ¼å¼ã€‚æ‰€æœ‰Hive çš„æ•°æ®éƒ½å­˜å‚¨åœ¨Hadoopå…¼å®¹çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆä¾‹å¦‚HDFSï¼‰ä¸­ã€‚Hive åœ¨åŠ è½½æ•°æ®è¿‡ç¨‹ä¸­ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œä»»ä½•çš„ä¿®æ”¹ï¼Œåªæ˜¯å°†æ•°æ®ç§»åŠ¨åˆ°HDFSä¸­Hive è®¾å®šçš„ç›®å½•ä¸‹ï¼Œå› æ­¤ï¼ŒHive ä¸æ”¯æŒå¯¹æ•°æ®çš„æ”¹å†™å’Œæ·»åŠ ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯åœ¨åŠ è½½çš„æ—¶å€™ç¡®å®šçš„ã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<p><strong>æ³¨æ„</strong>ï¼šHiveåªéœ€è¦åœ¨masterèŠ‚ç‚¹ä¸Šå®‰è£…é…ç½®</p>
<p>åœ¨<code>usr/local</code>ä¸‹æ–°å»ºhiveæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨winscpä¸Šä¼ hiveå®‰è£…åŒ…</p>
<p><code>cd /usr/local/hive</code>è¿›å…¥hiveæ–‡ä»¶å¤¹ï¼Œä½¿ç”¨<code>tar -zxvf apache-hive-2.3.4-bin.tar.gz</code>è§£å‹</p>
<p><img src="https://i.loli.net/2019/04/09/5cac1627b07ab.png" alt=""></p>
<p><strong>æ·»åŠ Hiveç¯å¢ƒå˜é‡</strong></p>
<p>åœ¨<code>etc/profile</code>ä¸­ï¼Œæ·»åŠ </p>
<pre><code>export JAVA_HOME=/usr/local/java/jdk1.8.0_191
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin

</code></pre>
<p>å’ŒåŸæœ‰çš„å˜é‡æ•´åˆä¸€ä¸‹ï¼Œå¦‚å›¾</p>
<p><img src="https://i.loli.net/2019/04/09/5cac163e4b5d2.png" alt=""></p>
<p><code>source /etc/profile</code>ä¿å­˜ä¸€ä¸‹å³å¯</p>
<h3 id="é…ç½®hive-sitexml">é…ç½®hive-site.xml</h3>
<p>è¿›å…¥hiveæ–‡ä»¶å¤¹ï¼Œå¤åˆ¶ä¸€ä»½<strong>hive-site.xml</strong></p>
<pre><code>cp hive-default.xml.template   hive-site.xml

</code></pre>
<p>ç”±äº<strong>hive-site.xml</strong>æ–‡ä»¶è¿‡é•¿ï¼Œæœ€å¥½å¤åˆ¶åˆ°è™šæ‹Ÿæœºå¤–ä¿®æ”¹ä¹‹åå†æ‹·è´å›æ¥</p>
<pre><code> &lt;property&gt;
    &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
    &lt;value&gt;jdbc:mysql://master:3306/hive_metadata?createDatabaseIfNotExist=true&lt;/value&gt;
    &lt;description&gt;
      JDBC connect string for a JDBC metastore.
      To use SSL to encrypt/authenticate the connection, provide database-specific SSL flag in the connection URL.
      For example, jdbc:postgresql://myhost/db?ssl=true for postgres database.
    &lt;/description&gt;
 &lt;/property&gt;
 
 &lt;property&gt;
    &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
    &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;
    &lt;description&gt;Driver class name for a JDBC metastore&lt;/description&gt;
 &lt;/property&gt;
  
 &lt;property&gt;
    &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
    &lt;value&gt;hive&lt;/value&gt;
    &lt;description&gt;Username to use against metastore database&lt;/description&gt;
 &lt;/property&gt;
    
 &lt;property&gt;
    &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
    &lt;value&gt;hive&lt;/value&gt;
    &lt;description&gt;password to use against metastore database&lt;/description&gt;
 &lt;/property&gt;

 &lt;property&gt;
    &lt;name&gt;hive.querylog.location&lt;/name&gt;
    &lt;value&gt;/usr/local/hive/hive-2.3.4/tmp/hadoop&lt;/value&gt;
    &lt;description&gt;Location of Hive run time structured log file&lt;/description&gt;
  &lt;/property&gt;
 
  &lt;property&gt;
    &lt;name&gt;hive.server2.logging.operation.log.location&lt;/name&gt;
    &lt;value&gt;/usr/local/hive/hive-2.3.4/tmp/hadoop/operation_logs&lt;/value&gt;
    &lt;description&gt;Top level directory where operation logs are stored if logging functionality is enabled&lt;/description&gt;
  &lt;/property&gt;
  
  &lt;property&gt;
    &lt;name&gt;hive.exec.local.scratchdir&lt;/name&gt;
    &lt;value&gt;/usr/local/hive/hive-2.3.4/tmp/hadoop&lt;/value&gt;
    &lt;description&gt;Local scratch space for Hive jobs&lt;/description&gt;
  &lt;/property&gt;
  
  &lt;property&gt;
    &lt;name&gt;hive.downloaded.resources.dir&lt;/name&gt;
    &lt;value&gt;/usr/local/hive/hive-2.3.4/tmp/${hive.session.id}_resources&lt;/value&gt;
    &lt;description&gt;Temporary local directory for added resources in the remote file system.&lt;/description&gt;
  &lt;/property&gt;
  
  &lt;property&gt;
    &lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;
    &lt;value&gt;false&lt;/value&gt;
    &lt;description&gt;
      Enforce metastore schema version consistency.
      True: Verify that version information stored in is compatible with one from Hive jars.  Also disable automatic
            schema migration attempt. Users are required to manually migrate schema after Hive upgrade which ensures
            proper metastore schema migration. (Default)
      False: Warn if the version information stored in metastore doesn't match with one from in Hive jars.
    &lt;/description&gt;
  &lt;/property&gt;

</code></pre>
<h3 id="é…ç½®hive-envshæ–‡ä»¶">é…ç½®hive-env.shæ–‡ä»¶</h3>
<p>å¤åˆ¶ä¸€ä»½é…ç½®æ–‡ä»¶</p>
<pre><code>cp hive-env.sh.template hive-env.sh

</code></pre>
<p>æ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼Œåšå¯¹åº”ä¿®æ”¹</p>
<pre><code># Set HADOOP_HOME to point to a specific hadoop install directory
HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7

# Hive Configuration Directory can be controlled by:
export HIVE_CONF_DIR=/usr/local/hive/hive-2.3.4/conf

# Folder containing extra libraries required for hive compilation/execution can be controlled by:
# export HIVE_AUX_JARS_PATH=
export JAVA_HOME=/usr/local/java/jdk1.8.0_201
export HIVE_HOME=/usr/local/hive/hive-2.3.4
</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac16eb109b4.png" alt=""></p>
<h3 id="ä¸‹è½½mysql-connector-javajar">ä¸‹è½½mysql-connector-java.jar</h3>
<p>å°†è¯¥jaråŒ…æ”¾è¿›<code>/usr/local/hive/hive-2.3.4/lib/</code>ä¸­å³å¯</p>
<h3 id="å®‰è£…å¹¶é…ç½®mysql">å®‰è£…å¹¶é…ç½®mysql</h3>
<p>å®‰è£…mysql-server</p>
<p><img src="https://i.loli.net/2019/04/09/5cac1704194cb.png" alt=""></p>
<p>å®Œæˆä¹‹åï¼Œ<code>systemctl status mysql.service</code>å¯ä»¥æŸ¥çœ‹å½“å‰çŠ¶æ€</p>
<p><img src="https://i.loli.net/2019/04/09/5cac172ee68ce.png" alt=""></p>
<h3 id="mysqlä¸Šåˆ›å»ºhiveå…ƒæ•°æ®åº“åˆ›å»ºhiveè´¦å·å¹¶è¿›è¡Œæˆæƒ">Mysqlä¸Šåˆ›å»ºhiveå…ƒæ•°æ®åº“ï¼Œåˆ›å»ºhiveè´¦å·ï¼Œå¹¶è¿›è¡Œæˆæƒ</h3>
<h2 id="å®‰è£…zookeeper">å®‰è£…Zookeeper</h2>
<h3 id="ä»‹ç»-3">ä»‹ç»</h3>
<blockquote>
<p>ZooKeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ï¼Œæ˜¯Hadoopå’ŒHbaseçš„é‡è¦ç»„ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚å…¶ç›®æ ‡å°±æ˜¯å°è£…å¥½å¤æ‚æ˜“å‡ºé”™çš„å…³é”®æœåŠ¡ï¼Œå°†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œæ€§èƒ½é«˜æ•ˆã€åŠŸèƒ½ç¨³å®šçš„ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ã€‚</p>
<p>ZooKeeperæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„åº”ç”¨ç¨‹åºåè°ƒæœåŠ¡ï¼Œæ˜¯Hadoopå’ŒHbaseçš„é‡è¦ç»„ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚å…¶ç›®æ ‡å°±æ˜¯å°è£…å¥½å¤æ‚æ˜“å‡ºé”™çš„å…³é”®æœåŠ¡ï¼Œå°†ç®€å•æ˜“ç”¨çš„æ¥å£å’Œæ€§èƒ½é«˜æ•ˆã€åŠŸèƒ½ç¨³å®šçš„ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ã€‚</p>
<p>é‚£ä¹ˆZookeeperèƒ½åšä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šå‡è®¾æˆ‘ä»¬æœ‰20ä¸ªæœç´¢å¼•æ“çš„æœåŠ¡å™¨(æ¯ä¸ªè´Ÿè´£æ€»ç´¢å¼•ä¸­çš„ä¸€éƒ¨åˆ†çš„æœç´¢ä»»åŠ¡)å’Œä¸€ä¸ªæ€»æœåŠ¡å™¨(è´Ÿè´£å‘è¿™20ä¸ªæœç´¢å¼•æ“çš„æœåŠ¡å™¨å‘å‡ºæœç´¢è¯·æ±‚å¹¶åˆå¹¶ç»“æœé›†)ï¼Œä¸€ä¸ªå¤‡ç”¨çš„æ€»æœåŠ¡å™¨(è´Ÿè´£å½“æ€»æœåŠ¡å™¨å®•æœºæ—¶æ›¿æ¢æ€»æœåŠ¡å™¨)ï¼Œä¸€ä¸ªwebçš„cgi(å‘æ€»æœåŠ¡å™¨å‘å‡ºæœç´¢è¯·æ±‚)ã€‚æœç´¢å¼•æ“çš„æœåŠ¡å™¨ä¸­çš„15ä¸ªæœåŠ¡å™¨æä¾›æœç´¢æœåŠ¡ï¼Œ5ä¸ªæœåŠ¡å™¨æ­£åœ¨ç”Ÿæˆç´¢å¼•ã€‚è¿™20ä¸ªæœç´¢å¼•æ“çš„æœåŠ¡å™¨ç»å¸¸è¦è®©æ­£åœ¨æä¾›æœç´¢æœåŠ¡çš„æœåŠ¡å™¨åœæ­¢æä¾›æœåŠ¡å¼€å§‹ç”Ÿæˆç´¢å¼•ï¼Œæˆ–ç”Ÿæˆç´¢å¼•çš„æœåŠ¡å™¨å·²ç»æŠŠç´¢å¼•ç”Ÿæˆå®Œæˆå¯ä»¥æä¾›æœç´¢æœåŠ¡äº†ã€‚ä½¿ç”¨Zookeeperå¯ä»¥ä¿è¯æ€»æœåŠ¡å™¨è‡ªåŠ¨æ„ŸçŸ¥æœ‰å¤šå°‘æä¾›æœç´¢å¼•æ“çš„æœåŠ¡å™¨å¹¶å‘è¿™äº›æœåŠ¡å™¨å‘å‡ºæœç´¢è¯·æ±‚ï¼Œå½“æ€»æœåŠ¡å™¨å®•æœºæ—¶è‡ªåŠ¨å¯ç”¨å¤‡ç”¨çš„æ€»æœåŠ¡å™¨ã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®-2">ç¯å¢ƒé…ç½®</h3>
<p>ä½¿ç”¨winscpä¸Šä¼ zookeeperå®‰è£…åŒ…</p>
<p>æ–°å»ºæ–‡ä»¶å¤¹<code>mkdir zookeeper</code></p>
<p>è§£å‹ç¼©<code>tar -zxvf zookeeper-3.4.10.tar.gz</code></p>
<p><img src="https://i.loli.net/2019/04/09/5cac2be852fc3.png" alt=""></p>
<p>ç¼–è¾‘<code>vim /etc/profile</code>ï¼Œå¯¹æ¯”æ·»åŠ å’Œä¿®æ”¹ï¼š</p>
<pre><code>export JAVA_HOME=/usr/local/java/jdk1.8.0_191
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.4.10
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin:$ZOOKEEPER_HOME/bin

</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2c2ce9312.png" alt=""></p>
<p>ä¿å­˜é€€å‡ºå¹¶<code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<h3 id="é…ç½®zoocfgæ–‡ä»¶">é…ç½®zoo.cfgæ–‡ä»¶</h3>
<pre><code>cd /usr/local/zookeeper/zookeeper-3.4.10/conf
cp zoo_sample.cfg zoo.cfg

</code></pre>
<p>å°†datadirä¿®æ”¹ä¸ºè‡ªå·±çš„åœ°å€ï¼Œå¹¶åœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šå¦‚å›¾æ‰€ç¤ºå­—æ®µ</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2cf42fc03.png" alt=""></p>
<h3 id="é…ç½®myidæ–‡ä»¶">é…ç½®myidæ–‡ä»¶</h3>
<pre><code>cd ..
mkdir data 
cd data
vim myid

</code></pre>
<p>åœ¨myidæ–‡ä»¶ä¸­è¾“å…¥<code>0</code>å³å¯</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2d8bdf835.png" alt=""></p>
<h3 id="æµ‹è¯•-2">æµ‹è¯•</h3>
<p>åœ¨<code>usr/local/zookeeper/zookeeper-3.4.10</code>ç›®å½•ä¸­</p>
<p>è¾“å…¥<code>bin/zkServer.sh start</code>å³å¯å¯åŠ¨zookeeperæœåŠ¡</p>
<p>jpsæŸ¥çœ‹ï¼Œæœ‰QuromPeerMainè¿›ç¨‹è¡¨ç¤ºå¯åŠ¨æˆåŠŸã€‚</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2e3a5b712.png" alt=""></p>
<h2 id="å®‰è£…kafka">å®‰è£…Kafka</h2>
<h3 id="ä»‹ç»-4">ä»‹ç»</h3>
<blockquote>
<p>Kafkaæ˜¯ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å¤„ç†æ¶ˆè´¹è€…è§„æ¨¡çš„ç½‘ç«™ä¸­çš„æ‰€æœ‰åŠ¨ä½œæµæ•°æ®ã€‚Producerå³ç”Ÿäº§è€…ï¼Œå‘Kafkaé›†ç¾¤å‘é€æ¶ˆæ¯ï¼Œåœ¨å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œä¼šå¯¹æ¶ˆæ¯è¿›è¡Œåˆ†ç±»ï¼Œå³ä¸»é¢˜ï¼ˆTopicï¼‰ï¼Œé€šè¿‡å¯¹æ¶ˆæ¯æŒ‡å®šä¸»é¢˜å¯ä»¥å°†æ¶ˆæ¯åˆ†ç±»ï¼Œæ¶ˆè´¹è€…å¯ä»¥åªå…³æ³¨è‡ªå·±éœ€è¦çš„Topicä¸­çš„æ¶ˆæ¯ã€‚Consumerï¼Œå³æ¶ˆè´¹è€…ï¼Œæ¶ˆè´¹è€…é€šè¿‡ä¸kafkaé›†ç¾¤å»ºç«‹é•¿è¿æ¥çš„æ–¹å¼ï¼Œä¸æ–­åœ°ä»é›†ç¾¤ä¸­æ‹‰å–æ¶ˆæ¯ï¼Œç„¶åå¯ä»¥å¯¹è¿™äº›æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<h3 id="å®‰è£…scala">å®‰è£…Scala</h3>
<p>Kafkaç”±Javaå’ŒScalaç¼–å†™ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè¦å®‰è£…é…ç½®Scala</p>
<pre><code>cd /usr/local
mkdir scala
cd scala/
#ç”¨winscpæŠŠscalaå®‰è£…åŒ…ä¸Šä¼ åˆ°è¯¥æ–‡ä»¶å¤¹å¹¶è§£å‹
tar -zxvf scala-2.11.8.tgz

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac2f658ca90.png" alt=""></p>
<h3 id="é…ç½®ç¯å¢ƒå˜é‡-2">é…ç½®ç¯å¢ƒå˜é‡</h3>
<p>è¿›å…¥<code>vim /etc/profile</code>ï¼Œå¯¹æ¯”ä¿®æ”¹ï¼š</p>
<pre><code>export JAVA_HOME=/usr/local/java/jdk1.8.0_191
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.4.10
export SCALA_HOME=/usr/local/scala/scala-2.11.8
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin:$ZOOKEEPER_HOME/bin:$SCALA_HOME/bin

</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2f847e2cc.png" alt=""></p>
<p>ä¿å­˜é€€å‡ºå¹¶<code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè¾“å…¥<code>scala -version</code>å³å¯æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2f9c8b962.png" alt=""></p>
<h3 id="é…ç½®kafka">é…ç½®Kafka</h3>
<p>åˆ›å»ºç›®å½•ï¼ŒæŠŠå‹ç¼©åŒ…ç”¨winscpä¸Šä¼ </p>
<pre><code>mkdir kafka
cd kafka
tar -zxvf kafka_2.11-2.1.0.tgz
mv kafka_2.11-2.1.0 kafka-2.1.0

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac2fc48d4f5.png" alt=""></p>
<h3 id="ä¿®æ”¹serverpropertiesæ–‡ä»¶">ä¿®æ”¹server.propertiesæ–‡ä»¶</h3>
<p><code>vim kafka-2.1.0/config/server.properties</code></p>
<p>æ‰¾åˆ°å¦‚ä¸‹å­—æ®µå¹¶å¯¹åº”ä¿®æ”¹</p>
<pre><code>broker.id=0
listeners=PLAINTEXT://192.168.6.22:9092
advertised.listeners=PLAINTEXT://192.168.6.22:9092
zookeeper.connect=192.168.6.22:2181

</code></pre>
<p>å¦‚å›¾</p>
<p><img src="https://i.loli.net/2019/04/09/5cac2fe843ebb.png" alt=""></p>
<p><img src="https://i.loli.net/2019/04/09/5cac3006eb331.png" alt=""></p>
<h3 id="æµ‹è¯•-3">æµ‹è¯•</h3>
<p>å¯åŠ¨kafka</p>
<pre><code>cd kafka/kafka-2.1.0/
bin/kafka-server-start.sh config/server.properties &amp;

</code></pre>
<p>jpsæŸ¥çœ‹è¿›ç¨‹</p>
<p><img src="https://i.loli.net/2019/04/09/5cac301f3c759.png" alt=""></p>
<h2 id="å®‰è£…flume">å®‰è£…Flume</h2>
<h3 id="ä»‹ç»-5">ä»‹ç»</h3>
<blockquote>
<p>Flumeæ˜¯Clouderaæä¾›çš„ä¸€ä¸ªé«˜å¯ç”¨çš„ï¼Œé«˜å¯é çš„ï¼Œåˆ†å¸ƒå¼çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿï¼ŒFlumeæ”¯æŒåœ¨æ—¥å¿—ç³»ç»Ÿä¸­å®šåˆ¶å„ç±»æ•°æ®å‘é€æ–¹ï¼Œç”¨äºæ”¶é›†æ•°æ®ï¼›åŒæ—¶ï¼ŒFlumeæä¾›å¯¹æ•°æ®è¿›è¡Œç®€å•å¤„ç†ï¼Œå¹¶å†™åˆ°å„ç§æ•°æ®æ¥å—æ–¹ï¼ˆå¯å®šåˆ¶ï¼‰çš„èƒ½åŠ›ã€‚Flumeæä¾›äº†ä»consoleï¼ˆæ§åˆ¶å°ï¼‰ã€RPCï¼ˆThrift-RPCï¼‰ã€textï¼ˆæ–‡ä»¶ï¼‰ã€tailï¼ˆUNIX tailï¼‰ã€syslogï¼ˆsyslogæ—¥å¿—ç³»ç»Ÿï¼‰ï¼Œæ”¯æŒTCPå’ŒUDPç­‰2ç§æ¨¡å¼ï¼‰ï¼Œexecï¼ˆå‘½ä»¤æ‰§è¡Œï¼‰ç­‰æ•°æ®æºä¸Šæ”¶é›†æ•°æ®çš„èƒ½åŠ›ã€‚</p>
<p>ä½¿ç”¨Flumeï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»å¤šä¸ªæœåŠ¡å™¨ä¸­è·å–çš„æ•°æ®è¿…é€Ÿçš„ç§»äº¤ç»™Hadoopä¸­ï¼Œå¯ä»¥é«˜æ•ˆç‡çš„å°†å¤šä¸ªç½‘ç«™æœåŠ¡å™¨ä¸­æ”¶é›†çš„æ—¥å¿—ä¿¡æ¯å­˜å…¥HDFS/HBaseä¸­ã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®-3">ç¯å¢ƒé…ç½®</h3>
<p>åˆ›å»ºç›®å½•ï¼Œä½¿ç”¨winscpæŠŠå‹ç¼©åŒ…ä¸Šä¼ </p>
<pre><code>mkdir flume
cd flume
tar -zxvf apache-flume-1.8.0-bin.tar.gz 
mv apache-flume-1.8.0-bin flume-1.8.0

</code></pre>
<p>å¦‚å›¾ï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac30389c66e.png" alt=""></p>
<p>æ‰“å¼€<code>vim /etc/profile</code>ï¼Œå¦‚ä¸‹ä¿®æ”¹</p>
<pre><code>export JAVA_HOME=/usr/local/java/jdk1.8.0_210
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.4.10
export SCALA_HOME=/usr/local/scala/scala-2.11.8
export FLUME_HOME=/usr/local/flume/flume-1.8.0
export FLUME_CONF_DIR=$FLUME_HOME/conf
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin:$ZOOKEEPER_HOME/bin:$SCALA_HOME/bin:$FLUME_HOME/bin

</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac305539db5.png" alt=""></p>
<p><code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<h3 id="ä¿®æ”¹flume-confproperties">ä¿®æ”¹flume-conf.properties</h3>
<pre><code>cd flume-1.8.0/conf
cp flume-conf.properties.template flume-conf.properties

</code></pre>
<p><code>vim flume-conf.properties</code>åœ¨æ–‡ä»¶æœ€ååŠ ä¸Šå¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code>#agent1è¡¨ç¤ºä»£ç†åç§°
agent1.sources=source1
agent1.sinks=sink1
agent1.channels=channel1
#é…ç½®source1
agent1.sources.source1.type=spooldir
agent1.sources.source1.spoolDir=/usr/local/flume/logs
agent1.sources.source1.channels=channel1
agent1.sources.source1.fileHeader = false
agent1.sources.source1.interceptors = i1
agent1.sources.source1.interceptors.i1.type = timestamp
#é…ç½®channel1
agent1.channels.channel1.type=file
agent1.channels.channel1.checkpointDir=/usr/local/flume/logs_tmp_cp
agent1.channels.channel1.dataDirs=/usr/local/flume/logs_tmp
#é…ç½®sink1
agent1.sinks.sink1.type=hdfs
agent1.sinks.sink1.hdfs.path=hdfs://master:9000/logs
agent1.sinks.sink1.hdfs.fileType=DataStream
agent1.sinks.sink1.hdfs.writeFormat=TEXT
agent1.sinks.sink1.hdfs.rollInterval=1
agent1.sinks.sink1.channel=channel1
agent1.sinks.sink1.hdfs.filePrefix=%Y-%m-%d

</code></pre>
<p>å› ä¸ºä¸Šé¢ç›‘å¬çš„æ–‡ä»¶å¤¹æ˜¯<code>usr/local/flume/logs</code>æ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨åˆ›å»º</p>
<pre><code>cd /usr/local/flume
mkdir logs

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac306e31d14.png" alt=""></p>
<p>ä¸Šé¢çš„é…ç½®æ–‡ä»¶ä¸­ <code>agent1.sinks.sink1.hdfs.path=hdfs://master:9000/logs</code>ä¸‹ï¼Œå³å°†ç›‘å¬åˆ°çš„<code>/usr/local/flume/logs</code>ä¸‹çš„æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ åˆ°hdfsçš„<code>/logs</code>ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æ‰‹åŠ¨åˆ›å»ºhdfsä¸‹çš„ç›®å½•</p>
<pre><code>hdfs dfs -mkdir /logs 
</code></pre>
<p>æœªå®Œå¾…ç»­â€¦.</p>
<h2 id="å®‰è£…hbase">å®‰è£…Hbase</h2>
<h3 id="ä»‹ç»-6">ä»‹ç»</h3>
<blockquote>
<p>HBase â€“ Hadoop Databaseï¼Œæ˜¯ä¸€ä¸ªé«˜å¯é æ€§ã€é«˜æ€§èƒ½ã€é¢å‘åˆ—ã€å¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿã€‚Hadoop HDFSä¸ºHBaseæä¾›äº†é«˜å¯é æ€§çš„åº•å±‚å­˜å‚¨æ”¯æŒï¼ŒHadoop MapReduceä¸ºHBaseæä¾›äº†é«˜æ€§èƒ½çš„è®¡ç®—èƒ½åŠ›ï¼ŒZookeeperä¸ºHBaseæä¾›äº†ç¨³å®šæœåŠ¡å’Œfailoveræœºåˆ¶ã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®-4">ç¯å¢ƒé…ç½®</h3>
<p>åˆ›å»ºç›®å½•ï¼Œä½¿ç”¨winscpå°†å‹ç¼©åŒ…ä¸Šä¼ </p>
<pre><code>mkdir hbase
cd hbase
tar -zxvf hbase-2.1.1-bin.tar.gz
</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac310163575.png" alt=""></p>
<p>æ‰“å¼€<code>vim /etc/profile</code>ç¯å¢ƒå˜é‡</p>
<pre><code>export JAVA_HOME=/usr/local/java/jdk1.8.0_210
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.4.10
export SCALA_HOME=/usr/local/scala/scala-2.11.8
export FLUME_HOME=/usr/local/flume/flume-1.8.0
export FLUME_CONF_DIR=$FLUME_HOME/conf
export HBASE_HOME=/usr/local/hbase/hbase-2.1.1
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin:$ZOOKEEPER_HOME/bin:$SCALA_HOME/bin:$FLUME_HOME/bin:$HBASE_HOME/bin

</code></pre>
<p>å¦‚å›¾æ‰€ç¤º</p>
<p><img src="https://i.loli.net/2019/04/09/5cac3193bdd8a.png" alt=""></p>
<p>ä¿å­˜é€€å‡ºå¹¶<code>source /etc/profile</code>ä½¿å…¶ç”Ÿæ•ˆ</p>
<h3 id="é…ç½®hbase-envsh">é…ç½®hbase-env.sh</h3>
<pre><code>cd hbase-2.1.1/conf
vim hbase-env.sh

#åé¢æ·»åŠ å¦‚ä¸‹å­—æ®µ
export JAVA_HOME=/usr/local/java/jdk1.8.0_210
export HBASE_LOG_DIR=${HBASE_HOME}/logs 
export HBASE_MANAGES_ZK=false

</code></pre>
<p>å¦‚å›¾</p>
<p><img src="https://i.loli.net/2019/04/09/5cac31b765090.png" alt=""></p>
<h3 id="é…ç½®hbase-sitexml">é…ç½®hbase-site.xml</h3>
<p>ç¼–è¾‘<code>vim hbase-site.xml</code></p>
<pre><code>&lt;configuration&gt;
&lt;property&gt; 
    &lt;name&gt;hbase.rootdir&lt;/name&gt; 
    &lt;value&gt;hdfs://master:9000/hbase&lt;/value&gt; 
  &lt;/property&gt; 
  &lt;property&gt; 
    &lt;name&gt;hbase.cluster.distributed&lt;/name&gt; 
    &lt;value&gt;true&lt;/value&gt; 
  &lt;/property&gt; 
  &lt;property&gt; 
    &lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt; 
    &lt;value&gt;master,slave1,slave2&lt;/value&gt; 
  &lt;/property&gt; 
  &lt;property&gt; 
    &lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt; 
    &lt;value&gt;/usr/local/zookeeper/zookeeper-3.4.10/data&lt;/value&gt; 
  &lt;/property&gt; 
  &lt;property&gt; 
    &lt;name&gt;hbase.master&lt;/name&gt; 
    &lt;value&gt;hdfs://master:60000&lt;/value&gt; 
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.master.info.port&lt;/name&gt;
    &lt;value&gt;16010&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;hbase.regionserver.info.port&lt;/name&gt;
    &lt;value&gt;16030&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac31d484fb2.png" alt=""></p>
<h3 id="é…ç½®regionserversæ–‡ä»¶">é…ç½®regionserversæ–‡ä»¶</h3>
<p>å› ä¸ºæˆ‘è¿™é‡Œåªæœ‰ä¸€ä¸ªmasterèŠ‚ç‚¹ï¼Œæ•…æ–‡ä»¶é‡Œåªä¿®æ”¹master</p>
<pre><code>vim regionservers 
master

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac31f5d19b3.png" alt=""></p>
<h3 id="æµ‹è¯•-4">æµ‹è¯•</h3>
<pre><code>cd hbase/hbase-2.1.1
bin/start-hbase.sh   
jps

</code></pre>
<p>æŸ¥çœ‹æ˜¯å¦å¯åŠ¨äº†<strong>HMaster</strong>å’Œ<strong>HRegionServer</strong>ï¼Œå¦‚å›¾æ‰€ç¤º</p>
<p><img src="https://i.loli.net/2019/04/09/5cac320ebc60f.png" alt=""></p>
<h2 id="å®‰è£…spark">å®‰è£…Spark</h2>
<h3 id="ä»‹ç»-7">ä»‹ç»</h3>
<blockquote>
<p>Apache Spark æ˜¯ä¸“ä¸ºå¤§è§„æ¨¡æ•°æ®å¤„ç†è€Œè®¾è®¡çš„å¿«é€Ÿé€šç”¨çš„è®¡ç®—å¼•æ“ï¼Œæ˜¯ç±»ä¼¼äºHadoop MapReduceçš„é€šç”¨å¹¶è¡Œæ¡†æ¶ã€‚Sparkæ‹¥æœ‰Hadoop MapReduceæ‰€å…·æœ‰çš„ä¼˜ç‚¹ï¼Œä½†ä¸åŒäºMapReduceçš„æ˜¯â€”â€”Jobä¸­é—´è¾“å‡ºç»“æœå¯ä»¥ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œä»è€Œä¸å†éœ€è¦è¯»å†™HDFSï¼Œå› æ­¤Sparkèƒ½æ›´å¥½åœ°é€‚ç”¨äºæ•°æ®æŒ–æ˜ä¸æœºå™¨å­¦ä¹ ç­‰éœ€è¦è¿­ä»£çš„MapReduceçš„ç®—æ³•ã€‚Sparkå®é™…ä¸Šæ˜¯å¯¹Hadoopçš„ä¸€ç§è¡¥å……ï¼Œå¯ä»¥å¾ˆå¥½çš„åœ¨Hadoop æ–‡ä»¶ç³»ç»Ÿä¸­å¹¶è¡Œè¿è¡Œã€‚</p>
</blockquote>
<h3 id="ç¯å¢ƒé…ç½®-5">ç¯å¢ƒé…ç½®</h3>
<p>åˆ›å»ºç›®å½•ï¼Œä½¿ç”¨winscpå°†å‹ç¼©åŒ…ä¸Šä¼ </p>
<pre><code>mkdir spark
cd spark
tar -zxvf spark-2.4.0-bin-hadoop2.7.tgz 
mv spark-2.4.0-bin-hadoop2.7 spark-2.4.0

</code></pre>
<p><img src="https://i.loli.net/2019/04/09/5cac32255d68f.png" alt=""></p>
<p>ä¿®æ”¹ç³»ç»Ÿå˜é‡</p>
<pre><code>vim /etc/profile
export JAVA_HOME=/usr/local/jdk/jdk1.8.0_201
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HIVE_HOME=/usr/local/hive/hive-2.3.4
export ZOOKEEPER_HOME=/usr/local/zookeeper/zookeeper-3.4.10
export SCALA_HOME=/usr/local/scala/scala-2.11.8
export FLUME_HOME=/usr/local/flume/flume-1.8.0
export FLUME_CONF_DIR=$FLUME_HOME/conf
export HBASE_HOME=/usr/local/hbase/hbase-2.1.1
export SPARK_HOME=/usr/local/spark/spark-2.4.0
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$HIVE_HOME/bin:$ZOOKEEPER_HOME/bin:$SCALA_HOME/bin:$FLUME_HOME/bin:$HBASE_HOME/bin:$SPARK_HOME/bin

</code></pre>
<p>ä¿å­˜é€€å‡ºå¹¶<code>source /etc/profile</code></p>
<p><img src="https://i.loli.net/2019/04/09/5cac323a76b22.png" alt=""></p>
<h3 id="é…ç½®spark-envshæ–‡ä»¶">é…ç½®spark-env.shæ–‡ä»¶</h3>
<pre><code>cd spark-2.4.0/conf/
cp spark-env.sh.template spark-env.sh
vim spark-env.sh 
#
export JAVA_HOME=/usr/local/jdk/jdk1.8.0_201
export SCALA_HOME=/usr/local/scala/scala-2.11.8
export HADOOP_HOME=/usr/local/hadoop/hadoop-2.7.7
export HADOOP_CONF_DIR=/usr/local/hadoop/hadoop-2.7.7/etc/hadoop
</code></pre>
<h3 id="é…ç½®slavesæ–‡ä»¶">é…ç½®slavesæ–‡ä»¶</h3>
<pre><code>mv slaves.template slaves
vim slaves
master
</code></pre>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://i.loli.net/2019/04/09/5cac3266773cb.png" alt=""></p>
<p>æ‰“å¼€æµè§ˆå™¨<strong>http://192.168.6.22:8080/</strong></p>
<p><img src="https://i.loli.net/2019/04/09/5cac32a8d2fb6.png" alt=""></p>
<h3 id="æµ‹è¯•-5">æµ‹è¯•</h3>
<p>ä½¿ç”¨Sparkè‡ªå¸¦çš„è®¡ç®—åœ†å‘¨ç‡åšæµ‹è¯•</p>
<pre><code>./bin/spark-submit  \
--class  org.apache.spark.examples.SparkPi  \
--master  local  \
examples/jars/spark-examples_2.11-2.4.0.jar
</code></pre>
<p>åœ¨æ§åˆ¶å°ä¸­å¯ä»¥æ‰¾åˆ°è¾“å‡ºçš„ç»“æœ</p>
<p><img src="https://i.loli.net/2019/04/09/5cac32c7b9e27.png" alt=""></p>

            </div>
          </article>
        </div>
    
        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://tediorelee.github.io/post/how-to-connect-azure-vnet-on-osx">
              <h3 class="post-title">
                ğŸŒˆHow to connect Azure Vnet on OSX
              </h3>
            </a>
          </div>  
        

        
    
        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> Published by <a href="https://tediorelee.cn">tediorelee</a> <a href="http://www.miitbeian.gov.cn">èœ€ICPå¤‡18031601å·</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
